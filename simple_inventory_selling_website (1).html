<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Snack Inventory System</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; padding:20px; }
    h1 { text-align:center; }
    table { width:100%; border-collapse: collapse; margin-top:20px; background:#fff; }
    th, td { border:1px solid #ccc; padding:10px; text-align:center; }
    th { background:#222; color:#fff; }
    input { width:90px; padding:5px; }
    button { padding:10px 20px; cursor:pointer; font-size:16px; }
    .log { margin-top:30px; background:#fff; padding:15px; }
    .sell-btn { margin-top:20px; text-align:center; }
  </style>
</head>
<body>

<h1>ðŸ›’ Snack Inventory & Sales</h1>

<table id="inventoryTable">
  <thead>
    <tr>
      <th>Item</th>
      <th>Available Qty</th>
      <th>Sell Qty</th>
      <th>Buyer Name</th>
      <th>Amount (â‚¹)</th>
    </tr>
  </thead>
  <tbody></tbody>
  <tfoot>
    <tr style="font-weight:bold;background:#f0f0f0;">
      <td colspan="4">Total Sale (â‚¹)</td>
      <td id="totalSale">0</td>
    </tr>
  </tfoot>
</table>

<div class="sell-btn">
  <button onclick="sellAll()">âœ… Sell</button>
</div>

<div class="log">
  <h3>ðŸ§¾ Purchase Log</h3>
  <ul id="purchaseLog"></ul>
</div>

<script>
  const items = [
    { name: "Tedhe Medhe", qty: 21 },
    { name: "Mad Angles", qty: 3 },
    { name: "Kurkure Puffcorn", qty: 5 },
    { name: "Uncle Chips (Blue)", qty: 5 },
    { name: "Uncle Chips (Green)", qty: 7 },
    { name: "Bingo Salsa Dip", qty: 5 },
    { name: "Blue Lays", qty: 5 },
    { name: "Green Lays", qty: 3 },
    { name: "Diet Coke", qty: 5 }
  ];

  const tableBody = document.querySelector("#inventoryTable tbody");
  const log = document.getElementById("purchaseLog");

  function renderTable() {
    tableBody.innerHTML = "";
    items.forEach((item, index) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${item.name}</td>
        <td>${item.qty}</td>
        <td><input type="number" min="0" id="qty-${index}" /></td>
        <td><input type="text" id="buyer-${index}" /></td>
        <td><input type="number" min="0" id="amount-${index}" /></td>
      `;
      tableBody.appendChild(row);
    });
  }

  function sellAll() {
    let sessionTotal = 0;
    items.forEach((item, index) => {
      const qtyInput = document.getElementById(`qty-${index}`);
      const buyerInput = document.getElementById(`buyer-${index}`);
      const amountInput = document.getElementById(`amount-${index}`);

      const sellQty = parseInt(qtyInput.value);
      const buyer = buyerInput.value.trim();
      const amount = parseFloat(amountInput.value);

      if (sellQty && sellQty > 0) {
        if (!buyer || !amount || amount <= 0) {
          alert(`Missing buyer name or amount for ${item.name}`);
          return;
        }
        if (sellQty > item.qty) {
          alert(`Not enough stock for ${item.name}`);
          return;
        }

        item.qty -= sellQty;
        const date = new Date().toLocaleString();
        const li = document.createElement("li");
        li.textContent = `${buyer} bought ${sellQty} Ã— ${item.name} for â‚¹${amount} on ${date}`;
        sessionTotal += amount; `${buyer} bought ${sellQty} Ã— ${item.name} for â‚¹${amount} on ${date}`;
        log.appendChild(li);

        qtyInput.value = "";
        buyerInput.value = "";
        amountInput.value = "";
      }
    });

    renderTable();
    const currentTotal = parseFloat(document.getElementById('totalSale').textContent) || 0;
    document.getElementById('totalSale').textContent = currentTotal + sessionTotal;
  }

  renderTable();
</script>

</body>
</html>
